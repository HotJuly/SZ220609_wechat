# 用户授权

1. 截至到2022/12/13,小程序一共出现了四种获取用户个人信息的方法,目前能够使用的只剩2种
2. 目前仅存的两种
   1. **基础库版本2.27以下可以使用**
      1. **API:wx.getUserProfile(配置对象)**
      2. **注意点:**
         1. **该方法必须在button按钮点击之后执行,才有效果**
         2. **配置对象必传参数desc,不能传入空字符串和数字**
         3. 使用该方法会弹出窗口,询问用户获取个人信息,但是想要得到个人信息,**必须通过事件回调函数才可获取**
         4. **该方法每调用一次,都会弹出窗口,无论之前是否已经允许授权**
      3. **流程:**
         1. **在页面上添加一个button按钮,并给当前button按钮绑定事件,事件名称:tap**
         2. **当用户点击按钮之后,会执行tap事件的回调函数,在回调函数中,需要调用wx.getUserProfile方法**
         3. **调用wx.getUserProfile方法之后,页面会弹出授权窗口,询问用户**
         4. **用户如果点击了允许,就会触发成功的回调函数**
         5. **最终在成功的回调函数中,通过形参获取到个人信息,最终更新到data中,显示在页面上**
      4. 如何在用户第二次登陆的时候展示个人数据
         1. 每次都重新调用该方法,找用户获取一份
         2. 将这份数据存储到当前手机中,下次打开项目的时候直接读取
   2. **基础库版本2.27以上可以使用的**
      1. 通过两个组件实现获取用户个人头像和昵称功能
         1.   <button open-type="chooseAvatar"  bindchooseavatar="handler1">获取头像</button>
         2. <input type="nickname" />
3. 扩展:
   1. **通过button按钮,配合open-type="getPhoneNumber"属性,就可以获取到用户的个人手机号**
      1. **但是该功能只有公司资质的小程序帐号,才能获取使用**