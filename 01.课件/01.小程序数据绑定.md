# 小程序数据绑定

1. ## C(Create 创建)

   1. Vue

      1. 需要在组件的配置对象中,添加配置属性data,属性值必须是一个函数

         1. 该函数会return一个对象,该对象中的数据会用于template中进行展示

      2. **面试题:请问data为什么必须是一个函数?**

         1. ```javascript
            <template>
              <A/>
              <A/>
              <A/>
            </template>

            <script>
              import A from './components/A.vue'
              export default{
                data(){
                  return{
            		msg:1
                  }
                },
            	components:{
             		A
            	}
              }
            </script>
            ```

            此处使用了三次A构造函数,会得到三个长得相同的实例对象

         2. 如果data是一个对象,那么当前组件创建的多个实例对象,会共享这一个data对象,很可能出现一个组件修改状态数据,导致所有组件实例都发生变化的情况,

         3. 而如果data是一个函数,那么每次创建实例对象的时候,Vue都会自动调用data函数,生成一个全新的data对象,用于存储当前组件自身的数据

         4. data中应该存放的是当前组件独享的数据,如果是多个组件共享的数据,应该放在Vuex中

   2. React

      1. 在class组件中,可以直接属性state={}即可,

      2. ```javascript
         class App extends Component{
           state={
             msg:1
           }
         }
         //class语法在每次生成实例对象的时候,都会重写创建一个state用于存储当前的数据
         ```

   3. 小程序

      1. 小程序只需要在配置对象中,添加data属性,**属性值是对象数据类型**
      2. **问题:为什么小程序的data可以是对象数据类型?**
         1. **因为小程序在每次创建页面实例对象的时候,都会根据data进行JSON深拷贝操作,得到一个全新的对象**

2. ## R(Read 读取)

   1. 在template中读取
      1. Vue
         1. 在template模版中,使用插值语法**({{msg}})**,可以将data中的数据在模版中进行展示
         2. **问题:在template中,什么情况下使用状态数据,需要加插值语法?**
            1. **如果是想将msg的数据作为文本展示,就需要使用到插值语法**
            2. **如果是想将msg的数据交给Vue指令使用,就不需要使用插值语法**
      2. React
         1. 在render函数中,使用**{this.state.msg}**语法,可以将state中的数据进行展示
      3. 小程序
         1. 语法与Vue相同,在wxml文件中,使用插值语法即可
         2. **小程序中,想要在wxml中,使用data中的数据,就必须加上插值语法(包括以后要学习指令)**
   2. 在js代码中读取
      1. Vue
         1. 语法:this.msg
         2. 流程:
            1. 开发者通过this.msg希望获取到对应的状态属性值,此时会触发数据代理操作,去读取this.$data.msg的值
            2. 由于读取的是this.$data.msg的值,会触发数据劫持操作
            3. 数据劫持操作中,Vue会将之前缓存好的msg的结果返回给开发者
         3. 注意点:其实data函数返回的对象,最终会存储在当前组件实例的$data属性中
      2. React
         1. 语法:this.state.msg
         2. **React必须开发者要找到state对象,从中读取出自己想要的数据**
            1. **因为React没有实现数据代理**
      3. 小程序
         1. **语法:this.data.msg**
         2. **小程序也没有实现数据代理,所以必须自己找到data对象才能够打印出对应的值**

3. U(Update 更新)

   1. Vue
      1. 语法:this.msg=123
      2. 流程:
         1. 开发者执行this.msg=123,想要修改msg的数据,会触发数据代理操作,执行this.$data.msg=123
         2. 执行this.$data.msg=123,会触发数据劫持操作
         3. 数据劫持操作中,会修改由闭包保留的当前属性的数据结果
         4. Vue会通知对应的组件实现DOM更新功能(dep.notify方法)
      3. **面试题:请问Vue更新数据是同步更新还是异步更新?**
         1. **同步更新**
      4. **面试题:请问Vue更新DOM是同步更新还是异步更新?**
         1. **异步更新(后台管理系统的编辑模式切换)**
   2. React(持久化状态框架)
      1. 语法:this.setState({msg:123})
      2. 必须调用setState才会导致组件DOM更新,如果直接操作state中的数据,没有更新效果,因为React没有实现数据劫持操作
      3. **面试题:请问React更新数据是同步更新还是异步更新?**
         1. **异步更新**
      4. **面试题:请问React更新DOM是同步更新还是异步更新?**
         1. **异步更新**
   3. 小程序
      1. 语法:this.setData({msg:123})
      2. **面试题:请问小程序更新数据是同步更新还是异步更新?**
         1. **同步更新**
         2. **无论任何时候,获取到的数据一定是最新的**
      3. **面试题:请问小程序更新DOM是同步更新还是异步更新?**
         1. **异步更新**

4. D(Delete 删除)

   1. 由于React和小程序都没有响应式效果,所以他们不需要考虑删除功能
   2. **Vue.delete或者this.$delete才能删除data中的某个数据,从而具有响应式效果**